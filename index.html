<!doctype html><html><head><meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>SPEEDING ALERT</title>  
<style>  
body{font-family:Segoe UI,Arial;background:#0c0d10;color:#eee;margin:14px;font-size:14px}  
h2{font-size:18px;margin-bottom:8px}  
.card{background:#15161a;border:1px solid #2a2d35;border-radius:8px;padding:8px;margin-bottom:8px}  
.row-container{display:flex;gap:8px;margin-bottom:8px}  
.card-small{flex:1;min-width:0}  
.card-small h3{font-size:14px;margin-bottom:6px}  
.card-small .k{margin-bottom:0}  
.card-small .mp3-test-container{flex-wrap:wrap}  
.table-container{max-height:400px;overflow-y:auto;border:1px solid #2a2d35;border-radius:4px;margin-top:8px}  
table{width:100%;border-collapse:collapse;font-size:12px}  
th,td{border:1px solid #2a2d35;padding:2.4px;text-align:left}  
input,button,select{padding:2.4px 4.8px;margin:1.2px;font-size:13.2px}  
.coord{font-size:12px;color:#aaa;margin-bottom:8px}  
.serial-container{position:fixed;bottom:0;left:0;right:0;background:#15161a;border-top:1px solid #2a2d35;padding:6px;z-index:1000;height:140px}  
.serial{background:#000;color:#0f0;padding:6px;border-radius:2px;font-family:monospace;font-size:13px;height:70px;overflow-y:auto;white-space:pre-wrap;margin-bottom:5px}  
.serial-controls{display:flex;justify-content:space-between;align-items:center}  
.notify{position:fixed;bottom:130px;right:20px;padding:8px 14px;background:#22c55e;color:#fff;border-radius:8px;display:none;z-index:1000}  
.blink{animation:blink 0.5s linear 3}  
@keyframes blink{50%{opacity:0}}  
.btn-test{background:#3b82f6;color:white;border:none;border-radius:4px;padding:1.2px 4.8px;cursor:pointer;font-size:12px}  
.btn-stop{background:#ef4444;color:white;border:none;border-radius:4px;padding:1.2px 4.8px;cursor:pointer;font-size:12px;margin-left:2.4px}  
.btn-save{background:#22c55e;color:white;border:none;border-radius:4px;padding:1.2px 4.8px;cursor:pointer;font-size:12px}  
.btn-delete{background:#ef4444;color:white;border:none;border-radius:4px;padding:1.2px 4.8px;cursor:pointer;font-size:12px;margin-left:2.4px}  
.btn-reset{background:#f59e0b;color:white;border:none;border-radius:4px;padding:1.2px 4.8px;cursor:pointer;font-size:12px;margin-left:2.4px}  
.mp3-test-container{display:flex;gap:4.8px;align-items:center;margin:4.8px 0}  
.k{display:flex;gap:4.8px;flex-wrap:wrap;align-items:center;margin-bottom:4.8px}  
input,select{width:100%;box-sizing:border-box;background:#0f1115;border:1px solid #2a2d35;color:#eee;border-radius:4px;padding:2.4px}  
.mp3-desc-container{display:flex;gap:4.8px;align-items:center;margin-top:2.4px}  
.mp3-desc-input{flex:1;margin-bottom:0;font-size:12px}  
.content{margin-bottom:140px}  
thead th {position: sticky;top: 0;background: #15161a;z-index: 10;border-bottom: 2px solid #2a2d35;}  
td {white-space: nowrap;overflow: hidden;text-overflow: ellipsis;}  
.coord-input{width:120px;font-size:11px}  
.coord-btn{font-size:11px;padding:1px 3px}  
.longlat-container{display:flex;gap:2px;align-items:center}  
.longlat-input{flex:1;min-width:80px}  
.area-input{width:180px}  
.modal{display:none;position:fixed;z-index:2000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,0.6)}  
.modal-content{background:#15161a;margin:8% auto;padding:16px;border:1px solid #2a2d35;border-radius:8px;width:90%;max-width:400px;color:#eee}  
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #2a2d35}  
.modal-title{font-size:16px;font-weight:bold}  
.close-modal{background:none;border:none;color:#eee;font-size:20px;cursor:pointer}  
.modal-body{padding:8px 0}  
.modal-gps-info{background:#0f1115;padding:8px;border-radius:4px;margin-bottom:12px;font-size:12px}  
.modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:16px}  
.btn-modal{background:#3b82f6;color:white;border:none;border-radius:4px;padding:6px 12px;cursor:pointer;font-size:12px}  
.btn-modal-cancel{background:#6b7280}  
.btn-modal-confirm{background:#22c55e}  
.coord-display{font-family:monospace;background:#000;padding:4px;border-radius:2px;margin:4px 0}  
.active-row{background-color:#2a3b4c !important}  
.jalur-muatan{border-left:4px solid #888 !important}  
.jalur-kosongan{border-left:4px solid #3b82f6 !important}  
.jalur-luar{border-left:4px solid #ef4444 !important}  
.aktif-indicator{position:absolute;left:0;top:0;width:100%;height:100%;background:rgba(255,255,255,0.1);animation:blink 1s infinite;pointer-events:none;border-radius:2px}  
.filter-container{margin:8px 0;display:flex;align-items:center;gap:8px}  
.filter-label{font-size:12px}  
.ovspd-indicator{background:rgba(255,50,50,0.2) !important;animation:pulse 0.8s infinite}  
@keyframes pulse{0%,100%{opacity:0.4}50%{opacity:0.8}}  
</style></head><body>  
<h2>SPEEDING ALERT</h2>  
<div class="content">
  <div class="row-container">
    <div class="card card-small">  
      <h3>GPS</h3>  
      <div class="k">  
        <button class="btn-test" onclick="showGPSCoordModal()">ðŸ“¡ Gunakan Koordinat GPS Saat Ini</button>  
        <span id="gpsStatus" style="font-size:12px;color:#aaa">GPS: Menunggu data...</span>  
      </div>  
    </div>  
    <div class="card card-small">  
      <h3>Test Audio</h3>  
      <div class="mp3-test-container">  
        <select id="mp3TrackSelect"></select>  
        <button class="btn-test" onclick="testMP3Track()">Play</button>  
        <button class="btn-stop" onclick="stopMP3()">Stop</button>  
        <button class="btn-reset" onclick="resetOneTimeMP3()">Reset MP3</button>  
      </div>  
      <div class="mp3-desc-container">
        <input type="text" id="mp3Description" class="mp3-desc-input" placeholder="Keterangan MP3 track...">
        <button class="btn-save" onclick="saveMP3Description()">Save Desc</button>
      </div>
    </div>  
  </div>
  <div class="card">  
    <div class="k">  
      <button onclick="exportCSV()">Export CSV</button>  
      <input type="file" id="importFile" style="display:none" accept=".csv" onchange="importCSV(this)">  
      <button onclick="document.getElementById('importFile').click()">Import CSV</button>  
      <button class="btn-stop" onclick="stopAllMP3()">Stop All MP3</button>  
      <button class="btn-save" onclick="addRow()">+ Add Row</button>
      <button class="btn-test" onclick="calculateAutoRadius()">auto distance CP</button>
      <button class="btn-test" onclick="saveAll()">Save All</button>
    </div>  
    <div class="filter-container">
      <span class="filter-label">Filter Jalur:</span>
      <select id="filterJalur" onchange="filterTable()">
        <option value="all">Semua Jalur</option>
        <option value="0">Muatan</option>
        <option value="1">Kosongan</option>
        <option value="2">Luar Area</option>
      </select>
    </div>
    <div class="table-container">
      <table>  
        <thead><tr>  
          <th>#</th><th>Longitude</th><th>Latitude</th><th>Nama Area</th>  
          <th>Overspeed km/jam</th><th>Radius</th><th>Jalur</th><th>MP3 Track</th><th>Checkpoint</th><th>1xmp3</th><th>Enabled</th><th>Actions</th>  
        </tr></thead>  
        <tbody id="tableBody"></tbody>  
      </table>  
    </div>
  </div>  
</div>
<div id="gpsModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-title">ðŸ“¡ Gunakan Koordinat GPS Saat Ini</div>
      <button class="close-modal" onclick="closeGPSCoordModal()">&times;</button>
    </div>
    <div class="modal-body">
      <div class="modal-gps-info">
        <strong>Koordinat GPS Terkini:</strong>
        <div class="coord-display" id="modalCurrentCoord">-</div>
        <div id="modalGPSStatus" style="font-size:11px;color:#aaa">Memuat data GPS...</div>
      </div>
      <div>
        <strong>Pilih cara pengisian:</strong>
        <div style="margin-top:8px">
          <input type="radio" id="fillActiveRow" name="fillType" value="activeRow" checked>
          <label for="fillActiveRow">Baris yang sedang aktif</label>
        </div>
        <div>
          <input type="radio" id="fillBoth" name="fillType" value="both">
          <label for="fillBoth">Semua input longitude & latitude yang kosong</label>
        </div>
        <div id="activeRowInfo" style="margin-top:8px;padding:8px;background:#1a1d24;border-radius:4px;font-size:11px;display:none">
          <strong>Baris aktif:</strong> <span id="activeRowNumber">  </span>
        </div>
      </div>
    </div>
    <div class="modal-actions">
      <button class="btn-modal btn-modal-cancel" onclick="closeGPSCoordModal()">Batal</button>
      <button class="btn-modal btn-modal-confirm" onclick="applyGPSCoordinates()">Terapkan Koordinat</button>
    </div>
  </div>
</div>
<div class="serial-container">  
  <h3>System Log</h3>  
  <div class="serial" id="serial">msg:Sistem Ready</div>  
  <div class="serial-controls">
    <span>System Status</span>
    <button onclick="clearSerial()">Clear Log</button>
  </div>
</div>  
<div id="notify" class="notify"></div>  
<script>  
